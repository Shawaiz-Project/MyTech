{% extends "admin/base.html" %}
{% block page_title %}Team Emails{% endblock %}
{% block content %}
<div class="admin-section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1>Team Emails Management</h1>
        <button onclick="document.getElementById('addForm').style.display = 'block'" class="btn">
            <i class="fas fa-plus"></i> Add Team Email
        </button>
    </div>

    <form id="addForm" method="POST" style="display:none; background: var(--bg-card); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
        <h3>Add New Team Email</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label>Name</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>
            <div class="form-group">
                <label>Role</label>
                <select name="role">
                    <option value="team">Team Member</option>
                    <option value="admin">Admin</option>
                </select>
            </div>
        </div>
        <button type="submit" class="btn">Add Email</button>
        <button type="button" onclick="document.getElementById('addForm').style.display = 'none'" class="btn" style="background: #666;">Cancel</button>
    </form>

    {% if team_emails %}
    <div style="background: var(--bg-card); border-radius: 8px; overflow: hidden;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: var(--bg-header); border-bottom: 2px solid var(--border-color);">
                    <th style="padding: 1rem; text-align: left;">Name</th>
                    <th style="padding: 1rem; text-align: left;">Email</th>
                    <th style="padding: 1rem; text-align: left;">Role</th>
                    <th style="padding: 1rem; text-align: left;">Status</th>
                    <th style="padding: 1rem; text-align: center;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for email in team_emails %}
                <tr style="border-bottom: 1px solid var(--border-color);">
                    <td style="padding: 1rem;">{{ email.name }}</td>
                    <td style="padding: 1rem;">{{ email.email }}</td>
                    <td style="padding: 1rem;">
                        <span style="background: {% if email.role == 'admin' %}#e74c3c{% else %}#3498db{% endif %}; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">
                            {{ email.role.title() }}
                        </span>
                    </td>
                    <td style="padding: 1rem;">
                        <span style="background: {% if email.status == 'active' %}#27ae60{% else %}#e74c3c{% endif %}; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem;">
                            {{ email.status.title() }}
                        </span>
                    </td>
                    <td style="padding: 1rem; text-align: center;">
                        <a href="{{ url_for('admin_bp.edit_team_email', id=email.id) }}" class="btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;">Edit</a>
                        <form method="POST" action="{{ url_for('admin_bp.delete_team_email', id=email.id) }}" style="display: inline; margin-left: 0.5rem;">
                            <button type="submit" class="btn" onclick="return confirm('Are you sure?')" style="padding: 0.5rem 1rem; font-size: 0.9rem; background: #e74c3c;">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="background: var(--bg-card); padding: 2rem; border-radius: 8px; text-align: center;">
        <p>No team emails added yet. Click "Add Team Email" to get started.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
